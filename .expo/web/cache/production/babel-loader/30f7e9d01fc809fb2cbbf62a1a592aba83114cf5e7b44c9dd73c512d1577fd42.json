{"ast":null,"code":"import React,{useEffect}from'react';import Platform from\"react-native-web/dist/exports/Platform\";import*as ScreenOrientation from'expo-screen-orientation';import HLSVideoPlayer from'./HLSVideoPlayer';import{VideoView}from'expo-video';import{jsx as _jsx}from\"react/jsx-runtime\";const VideoWindow=({currentChannel,videoWidth,videoHeight,player,controls=true})=>{useEffect(()=>{async function unlockOrientation(){try{await ScreenOrientation.unlockAsync();console.log(\"Видео окно: ориентация разблокирована\");}catch(error){console.log(\"Ошибка разблокировки ориентации для видео:\",error);}}unlockOrientation();return()=>{async function lockOrientationBack(){try{await ScreenOrientation.lockAsync(ScreenOrientation.OrientationLock.PORTRAIT);console.log(\"Видео окно: ориентация снова заблокирована\");}catch(error){console.log(\"Ошибка повторной блокировки ориентации:\",error);}}lockOrientationBack();};},[]);if(true){return _jsx(HLSVideoPlayer,{source:currentChannel.uri,style:{width:videoWidth,height:videoHeight},controls:controls});}else{return _jsx(VideoView,{player:player,style:{width:videoWidth,height:videoHeight},useNativeControls:true,resizeMode:\"contain\"});}};export default VideoWindow;","map":{"version":3,"names":["React","useEffect","Platform","ScreenOrientation","HLSVideoPlayer","VideoView","jsx","_jsx","VideoWindow","currentChannel","videoWidth","videoHeight","player","controls","unlockOrientation","unlockAsync","console","log","error","lockOrientationBack","lockAsync","OrientationLock","PORTRAIT","source","uri","style","width","height","useNativeControls","resizeMode"],"sources":["/home/orr/GitHub/Dabbetul-Arz/src/components/VideoWindow.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Platform } from 'react-native';\nimport * as ScreenOrientation from 'expo-screen-orientation';\nimport HLSVideoPlayer from './HLSVideoPlayer';\nimport { VideoView } from 'expo-video';\n\n/**\n * VideoWindow — обёртка для видео, которая при монтировании\n * разблокирует (разрешает) изменение ориентации только для окна видео,\n * а при размонтировании возвращает блокировку на портрет.\n *\n * При платформе web используется HLSVideoPlayer, а на остальных — VideoView.\n *\n * Пропсы:\n *   currentChannel: объект с данными канала (uri и metadata)\n *   videoWidth, videoHeight: размеры видео\n *   player: плеер (для VideoView, используется на мобильных устройствах)\n *   controls: флаг отображения панели управления\n */\nconst VideoWindow = ({ currentChannel, videoWidth, videoHeight, player, controls = true }) => {\n  useEffect(() => {\n    async function unlockOrientation() {\n      try {\n        await ScreenOrientation.unlockAsync();\n        console.log(\"Видео окно: ориентация разблокирована\");\n      } catch (error) {\n        console.log(\"Ошибка разблокировки ориентации для видео:\", error);\n      }\n    }\n    unlockOrientation();\n\n    return () => {\n      async function lockOrientationBack() {\n        try {\n          await ScreenOrientation.lockAsync(ScreenOrientation.OrientationLock.PORTRAIT);\n          console.log(\"Видео окно: ориентация снова заблокирована\");\n        } catch (error) {\n          console.log(\"Ошибка повторной блокировки ориентации:\", error);\n        }\n      }\n      lockOrientationBack();\n    };\n  }, []);\n\n  if (Platform.OS === 'web') {\n    return (\n      <HLSVideoPlayer\n        source={currentChannel.uri}\n        style={{ width: videoWidth, height: videoHeight }}\n        controls={controls}\n      />\n    );\n  } else {\n    return (\n      <VideoView\n        player={player}\n        style={{ width: videoWidth, height: videoHeight }}\n        useNativeControls={true}\n        resizeMode=\"contain\"\n      />\n    );\n  }\n};\n\nexport default VideoWindow; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CAAC,OAAAC,QAAA,8CAEzC,MAAO,GAAK,CAAAC,iBAAiB,KAAM,yBAAyB,CAC5D,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,OAASC,SAAS,KAAQ,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAevC,KAAM,CAAAC,WAAW,CAAGA,CAAC,CAAEC,cAAc,CAAEC,UAAU,CAAEC,WAAW,CAAEC,MAAM,CAAEC,QAAQ,CAAG,IAAK,CAAC,GAAK,CAC5FZ,SAAS,CAAC,IAAM,CACd,cAAe,CAAAa,iBAAiBA,CAAA,CAAG,CACjC,GAAI,CACF,KAAM,CAAAX,iBAAiB,CAACY,WAAW,CAAC,CAAC,CACrCC,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC,CACtD,CAAE,MAAOC,KAAK,CAAE,CACdF,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAEC,KAAK,CAAC,CAClE,CACF,CACAJ,iBAAiB,CAAC,CAAC,CAEnB,MAAO,IAAM,CACX,cAAe,CAAAK,mBAAmBA,CAAA,CAAG,CACnC,GAAI,CACF,KAAM,CAAAhB,iBAAiB,CAACiB,SAAS,CAACjB,iBAAiB,CAACkB,eAAe,CAACC,QAAQ,CAAC,CAC7EN,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC,CAC3D,CAAE,MAAOC,KAAK,CAAE,CACdF,OAAO,CAACC,GAAG,CAAC,yCAAyC,CAAEC,KAAK,CAAC,CAC/D,CACF,CACAC,mBAAmB,CAAC,CAAC,CACvB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,QAA2B,CACzB,MACE,CAAAZ,IAAA,CAACH,cAAc,EACbmB,MAAM,CAAEd,cAAc,CAACe,GAAI,CAC3BC,KAAK,CAAE,CAAEC,KAAK,CAAEhB,UAAU,CAAEiB,MAAM,CAAEhB,WAAY,CAAE,CAClDE,QAAQ,CAAEA,QAAS,CACpB,CAAC,CAEN,CAAC,IAAM,CACL,MACE,CAAAN,IAAA,CAACF,SAAS,EACRO,MAAM,CAAEA,MAAO,CACfa,KAAK,CAAE,CAAEC,KAAK,CAAEhB,UAAU,CAAEiB,MAAM,CAAEhB,WAAY,CAAE,CAClDiB,iBAAiB,CAAE,IAAK,CACxBC,UAAU,CAAC,SAAS,CACrB,CAAC,CAEN,CACF,CAAC,CAED,cAAe,CAAArB,WAAW","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}